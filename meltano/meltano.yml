version: 1
default_environment: dev
project_id: desafiolh-445818

environments:
  - name: dev
  - name: staging
  - name: prod

plugins:
  extractors:
  - name: tap-postgres
    variant: meltanolabs
    pip_url: git+https://github.com/MeltanoLabs/tap-postgres.git
    config:
      sqlalchemy_url: postgresql://stitch_extract:etl_101_passwd@35.239.223.162:5432/Adventureworks
      select:
        - sales-salesorderheader.*
        - sales-salesorderdetail.*
        - production-product.*
        - production-productinventory.*
        - '*.*.*'
        - '!information_schema*.*'
      replication_method: INCREMENTAL
      metadata:
        - name: humanresources-department
          unique_key: ["departmentid"]
        - name: humanresources-employee
          unique_key: ["businessentityid"]
        - name: sales-salesorderheader
          unique_key: ["salesorderid"]
        - name: production-product
          unique_key: ["productid"]

  loaders:
  - name: target-bigquery
    variant: z3z1ma
    pip_url: git+https://github.com/z3z1ma/target-bigquery.git
    config:
      project: desafioadventureworks-445317
      dataset: raw_data
      credentials_path: C:/Temp/desafiolh-445818-3cb0f62cb9ef.json
      max_workers: 8

  - name: target-jsonl
    variant: andyh1203
    pip_url: target-jsonl

  transformers:
  - name: dbt
    variant: dbt-labs
    pip_url: dbt-core~=1.3.0 dbt-postgres~=1.3.0 dbt-redshift~=1.3.0 dbt-snowflake~=1.3.0 dbt-bigquery~=1.3.0
