version: 1
default_environment: dev
project_id: desafioadventureworks-446600

environments:
- name: dev
  config:
    plugins:
      extractors:
      - name: tap-postgres
        config:
          replication_method: FULL_TABLE
        select:
        - '!*.*.*'
        - '!!information_schema*.*.*'
        - sales-customer.*
        - sales-salesorderheader.*
        - sales-salesorderdetail.*
        - sales-store.*
        - sales-salesterritory.*
        - production-product.*
        - production-productinventory.*
        - production-productcategory.*
        - production-productsubcategory.*
        - production-location.*
        - person-person.*
        - person-stateprovince.*
        - person-businessentity.*
        - person-address.*
        - humanresources-employee.*

- name: staging
- name: prod

plugins:
  extractors:
  - name: tap-postgres
    variant: meltanolabs
    pip_url: git+https://github.com/MeltanoLabs/tap-postgres.git
    config:
      sqlalchemy_url: postgresql://stitch_extract:etl_101_passwd@35.239.223.162:5432/Adventureworks
      replication_method: FULL_TABLE
      select:
        - '!*.*.*'
        - '!!information_schema*.*.*'
        - sales-customer.*
        - sales-salesorderheader.*
        - sales-salesorderdetail.*
        - sales-store.*
        - sales-salesterritory.*
        - production-product.*
        - production-productinventory.*
        - production-productcategory.*
        - production-productsubcategory.*
        - production-location.*
        - person-person.*
        - person-stateprovince.*
        - person-businessentity.*
        - person-address.*
        - humanresources-employee.*

  loaders:
  - name: target-bigquery
    variant: z3z1ma
    pip_url: git+https://github.com/z3z1ma/target-bigquery.git
    config:
      project: desafioadventureworks-446600
      dataset: raw_data
      location: us-central1
      credentials_path: /mnt/c/Temp/desafiolh-445818-3cb0f62cb9ef.json 
      max_workers: 8
      table_name_format: "{schema}_{table}"

  - name: target-csv
    variant: meltanolabs
    pip_url: git+https://github.com/MeltanoLabs/target-csv.git
    config:
      destination_path: ./csv_output
      delimiter: ","
      quotechar: '"'
      overwrite: true

  transformers:
  - name: dbt
    variant: dbt-labs
    pip_url: dbt-core~=1.3.0 dbt-postgres~=1.3.0 dbt-redshift~=1.3.0 dbt-snowflake~=1.3.0
      dbt-bigquery~=1.3.0
